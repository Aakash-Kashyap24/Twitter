(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[804],{5951:function(e,l,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/[userIds]",function(){return s(5720)}])},9852:function(e,l,s){"use strict";var t=s(5893),r=s(7294),n=s(1163),i=s(7516);l.Z=e=>{let{showBackArrow:l,label:s}=e,a=(0,n.useRouter)(),o=(0,r.useCallback)(()=>{a.back()},[a]);return(0,t.jsx)("div",{className:"border-b-[1px] border-neutral-800 p-5",children:(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[l&&(0,t.jsx)(i.YiX,{onClick:o,color:"white",size:20,className:" cursor-pointer  hover:opacity-70  transition "}),(0,t.jsx)("h1",{className:"text-white text-xl font-semibold",children:s})]})})}},7406:function(e,l,s){"use strict";var t=s(5893),r=s(2402),n=s(9410);l.Z=e=>{let{userId:l}=e,{data:s=[]}=(0,r.Z)(l);return(0,t.jsx)(t.Fragment,{children:s.map(e=>(0,t.jsx)(n.Z,{userId:l,data:e},e.id))})}},9410:function(e,l,s){"use strict";s.d(l,{Z:function(){return p}});var t=s(5893),r=s(1163),n=s(7294),i=s(8193),a=s(6422),o=s(1524),d=s(1954),c=s(6154),u=s(6501),x=s(4217),v=s(2402),m=e=>{let{postId:l,userId:s}=e,{data:t}=(0,d.Z)(),{data:r,mutate:i}=(0,x.Z)(l),{mutate:a}=(0,v.Z)(s),m=(0,o.Z)(),h=(0,n.useMemo)(()=>{let e=(null==r?void 0:r.likeIds)||[];return e.includes(null==t?void 0:t.id)},[r,t]),p=(0,n.useCallback)(async()=>{if(!t)return m.onOpen();try{let e;e=h?()=>c.Z.delete("/api/like?postId=".concat(l,"&userId?=").concat(s)):()=>c.Z.post("/api/like",{postId:l}),await e(),i(),a(),u.Am.success("Success")}catch(e){u.Am.error("Something went wrong")}},[t,h,l,a,i,m]);return{hasLiked:h,toggleLike:p}},h=s(9873),p=e=>{var l,s;let{data:c={},userId:u}=e,x=(0,r.useRouter)(),v=(0,o.Z)(),{data:p}=(0,d.Z)(),{hasLiked:f,toggleLike:j}=m({postId:c.id,userId:u}),w=(0,n.useCallback)(e=>{e.stopPropagation(),x.push("/user/".concat(c.user.id))},[x,c.user.id]),N=(0,n.useCallback)(()=>{x.push("/posts/".concat(c.id))},[x,c.id]),Z=(0,n.useCallback)(async e=>{if(e.stopPropagation(),!p)return v.onOpen();j()},[v,p,j]),b=f?i.M_L:i.lo,g=(0,n.useMemo)(()=>(null==c?void 0:c.createdAt)?(0,a.Z)(new Date(c.createdAt)):null,[c.createdAt]);return(0,t.jsx)("div",{onClick:N,className:" border-b-[1px]  border-neutral-800  p-5  cursor-pointer  hover:bg-neutral-900  transition ",children:(0,t.jsxs)("div",{className:"flex flex-row items-start gap-3",children:[(0,t.jsx)(h.Z,{userIds:c.user.id}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,t.jsx)("p",{onClick:w,className:" text-white  font-semibold  cursor-pointer  hover:underline ",children:null==c?void 0:null===(l=c.user)||void 0===l?void 0:l.name}),(0,t.jsxs)("span",{onClick:w,className:" text-neutral-500 cursor-pointer hover:underline hidden md:block ",children:["@",c.user.username]}),(0,t.jsx)("span",{className:"text-neutral-500 text-sm",children:g})]}),(0,t.jsx)("div",{className:"text-white mt-1",children:null==c?void 0:c.body}),(0,t.jsxs)("div",{className:"flex flex-row items-center mt-3 gap-10",children:[(0,t.jsxs)("div",{className:" flex  flex-row  items-center  text-neutral-500  gap-2  cursor-pointer  transition  hover:text-sky-500 ",children:[(0,t.jsx)(i.e$J,{size:20}),(0,t.jsx)("p",{children:(null===(s=c.comments)||void 0===s?void 0:s.length)||0})]}),(0,t.jsxs)("div",{onClick:Z,className:" flex  flex-row  items-center  text-neutral-500  gap-2  cursor-pointer  transition  hover:text-red-500 ",children:[(0,t.jsx)(b,{color:f?"red":"",size:20}),(0,t.jsx)("p",{children:null==c?void 0:c.likeIds.length})]})]})]})]})})}},4217:function(e,l,s){"use strict";var t=s(9734),r=s(8698);l.Z=e=>{let{data:l,error:s,isLoading:n,mutate:i}=(0,t.ZP)(e?"/api/posts/".concat(e):null,r.Z);return{data:l,error:s,isLoading:n,mutate:i}}},2402:function(e,l,s){"use strict";var t=s(8698),r=s(9734);l.Z=e=>{let{data:l,error:s,isLoading:n,mutate:i}=(0,r.ZP)(e?"/api/posts?userId=".concat(e):"/api/posts",t.Z);return{data:l,error:s,isLoading:n,mutate:i}}},5720:function(e,l,s){"use strict";s.r(l),s.d(l,{default:function(){return y}});var t=s(5893),r=s(9852),n=s(7406),i=s(7294),a=s(7516),o=s(1510),d=s(1954),c=s(1699),u=s(1524),x=s(6501),v=s(6154),m=e=>{let{data:l,mutate:s}=(0,d.Z)(),{mutate:t}=(0,c.Z)(e),r=(0,u.Z)(),n=(0,i.useMemo)(()=>{let s=(null==l?void 0:l.followingIds)||[];return s.includes(e)},[e,null==l?void 0:l.followingIds]),a=(0,i.useCallback)(async()=>{if(!l)return null==r?void 0:r.onOpen();try{let l;l=n?()=>v.Z.delete("/api/follow?userId=".concat(e)):()=>v.Z.post("/api/follow",{userId:e}),await l(),s(),t(),x.Am.success("success")}catch(e){x.Am.error("Something went wrong")}},[l,n,r,s,t,e]);return{isFollowing:n,toggleFollow:a}},h=s(4227),p=s(8726),f=e=>{var l,s,r,n,u,x;let{userId:v}=e,{data:f}=(0,d.Z)(),{data:j}=(0,c.Z)(v),w=(0,h.Z)(),{isFollowing:N,toggleFollow:Z}=m(v),b=(0,i.useMemo)(()=>{var e,l;return(null==j?void 0:null===(e=j.user)||void 0===e?void 0:e.createAt)?(0,o.Z)(new Date(null==j?void 0:null===(l=j.user)||void 0===l?void 0:l.createAt),"MMMM yyyy"):null},[null==j?void 0:null===(l=j.user)||void 0===l?void 0:l.createAt]);return(0,t.jsxs)("div",{className:"border-b-[1px] border-neutral-800 pb-4",children:[(0,t.jsx)("div",{className:"flex justify-end p-2",children:(null==f?void 0:f.id)===v?(0,t.jsx)(p.Z,{secondary:!0,label:"Edit",onClick:w.onOpen}):(0,t.jsx)(p.Z,{onClick:Z,label:N?"Unfollow":"Follow",secondary:!N,outline:N})}),(0,t.jsxs)("div",{className:"mt-8 px-4",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("p",{className:"text-white text-2xl font-semibold",children:null==j?void 0:null===(s=j.user)||void 0===s?void 0:s.name}),(0,t.jsxs)("p",{className:"text-md text-neutral-500",children:["@",null==j?void 0:null===(r=j.user)||void 0===r?void 0:r.username]})]}),(0,t.jsxs)("div",{className:"flex flex-col mt-4",children:[(0,t.jsx)("p",{className:"text-white",children:(null==j?void 0:null===(n=j.user)||void 0===n?void 0:n.bio)||"Enter Your Bio"}),(0,t.jsxs)("div",{className:" flex  flex-row  items-center  gap-2  mt-4  text-neutral-500 ",children:[(0,t.jsx)(a.R1q,{size:24}),(0,t.jsxs)("p",{children:["Joined ",b]})]})]}),(0,t.jsxs)("div",{className:"flex flex-row items-center mt-4 gap-6",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[(0,t.jsx)("p",{className:"text-white",children:(null==j?void 0:null===(u=j.user)||void 0===u?void 0:null===(x=u.followingIds)||void 0===x?void 0:x.length)||0}),(0,t.jsx)("p",{className:"text-neutral-500",children:"Following"})]}),(0,t.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[(0,t.jsx)("p",{className:"text-white",children:(null==j?void 0:j.followersCount)||0}),(0,t.jsx)("p",{className:"text-neutral-500",children:"Followers"})]})]})]})]})},j=s(5675),w=s.n(j),N=s(9873),Z=e=>{var l,s;let{userIds:r}=e,{data:n,isLoading:i}=(0,c.Z)(r);return(0,t.jsxs)("div",{className:"bg-neutral-700 h-44 relative",children:[(null==n?void 0:null===(l=n.user)||void 0===l?void 0:l.coverImage)&&(0,t.jsx)(w(),{src:null==n?void 0:null===(s=n.user)||void 0===s?void 0:s.coverImage,fill:!0,alt:"cover-image",style:{objectFit:"cover"}}),(0,t.jsx)("div",{className:"absolute -bottom-16 left-4",children:(0,t.jsx)(N.Z,{userIds:r,isLarge:!0,hasBorder:!0})})]})},b=s(9008),g=s.n(b),k=s(1163),I=s(373),y=()=>{var e,l;let s=(0,k.useRouter)(),{userIds:i}=s.query,{data:a,isLoading:o,error:d}=(0,c.Z)(i);return!o&&(a||d)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g(),{children:(0,t.jsx)("title",{children:(null==a?void 0:null===(e=a.user)||void 0===e?void 0:e.name)||"Loading..."})}),(0,t.jsx)(r.Z,{label:null==a?void 0:null===(l=a.user)||void 0===l?void 0:l.name,showBackArrow:!0}),(0,t.jsx)(Z,{userIds:i}),(0,t.jsx)(f,{userId:i}),(0,t.jsx)(n.Z,{userId:i})]}):(0,t.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,t.jsx)(I.Z,{color:"lightblue",size:80})})}}},function(e){e.O(0,[877,48,774,888,179],function(){return e(e.s=5951)}),_N_E=e.O()}]);