(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(2603)}])},2382:function(e,t,s){"use strict";var r=s(5893),n=s(6154),l=s(7294),i=s(6501),a=s(1524),c=s(1042),o=s(1954),d=s(2402),u=s(9873),x=s(8726),p=s(4217);t.Z=e=>{let{placeholder:t,isComment:s,postId:h}=e,m=(0,c.Z)(),f=(0,a.Z)(),{data:j}=(0,o.Z)(),{mutate:v}=(0,d.Z)(),{mutate:w}=(0,p.Z)(h),[b,Z]=(0,l.useState)(""),[N,g]=(0,l.useState)(!1),k=(0,l.useCallback)(async()=>{try{g(!0);let e=s?"/api/comments?postId=".concat(h):"/api/posts";await n.Z.post(e,{body:b}),i.Am.success("Tweeted"),Z(""),v()}catch(e){i.Am.error("Something went wrong")}finally{g(!1)}},[b,v,s,h]);return(0,r.jsx)("div",{className:"border-b-[1px] border-neutral-800 px-5 py-2",children:j?(0,r.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,r.jsx)("div",{children:(0,r.jsx)(u.Z,{userIds:null==j?void 0:j.id})}),(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("textarea",{disabled:N,onChange:e=>Z(e.target.value),value:b,className:" disabled:opacity-80 peer resize-none  mt-3  w-full  bg-black  ring-0  outline-none  text-[20px]  placeholder-neutral-500  text-white ",placeholder:t}),(0,r.jsx)("hr",{className:" opacity-0  peer-focus:opacity-100  h-[1px]  w-full  border-neutral-800  transition"}),(0,r.jsx)("div",{className:"mt-4 flex flex-row justify-end",children:(0,r.jsx)(x.Z,{disabled:N||!b,onClick:k,label:"Tweet"})})]})]}):(0,r.jsxs)("div",{className:"py-8",children:[(0,r.jsx)("h1",{className:"text-white text-2xl text-center mb-4 font-bold",children:"Welcome to Twitter"}),(0,r.jsxs)("div",{className:"flex flex-row items-center justify-center gap-4",children:[(0,r.jsx)(x.Z,{label:"Login",onClick:f.onOpen}),(0,r.jsx)(x.Z,{label:"Register",onClick:m.onOpen,secondary:!0})]})]})})}},9852:function(e,t,s){"use strict";var r=s(5893),n=s(7294),l=s(1163),i=s(7516);t.Z=e=>{let{showBackArrow:t,label:s}=e,a=(0,l.useRouter)(),c=(0,n.useCallback)(()=>{a.back()},[a]);return(0,r.jsx)("div",{className:"border-b-[1px] border-neutral-800 p-5",children:(0,r.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[t&&(0,r.jsx)(i.YiX,{onClick:c,color:"white",size:20,className:" cursor-pointer  hover:opacity-70  transition "}),(0,r.jsx)("h1",{className:"text-white text-xl font-semibold",children:s})]})})}},7406:function(e,t,s){"use strict";var r=s(5893),n=s(2402),l=s(9410);t.Z=e=>{let{userId:t}=e,{data:s=[]}=(0,n.Z)(t);return(0,r.jsx)(r.Fragment,{children:s.map(e=>(0,r.jsx)(l.Z,{userId:t,data:e},e.id))})}},9410:function(e,t,s){"use strict";s.d(t,{Z:function(){return f}});var r=s(5893),n=s(1163),l=s(7294),i=s(8193),a=s(6422),c=s(1524),o=s(1954),d=s(6154),u=s(6501),x=s(4217),p=s(2402),h=e=>{let{postId:t,userId:s}=e,{data:r}=(0,o.Z)(),{data:n,mutate:i}=(0,x.Z)(t),{mutate:a}=(0,p.Z)(s),h=(0,c.Z)(),m=(0,l.useMemo)(()=>{let e=(null==n?void 0:n.likeIds)||[];return e.includes(null==r?void 0:r.id)},[n,r]),f=(0,l.useCallback)(async()=>{if(!r)return h.onOpen();try{let e;e=m?()=>d.Z.delete("/api/like?postId=".concat(t,"&userId?=").concat(s)):()=>d.Z.post("/api/like",{postId:t}),await e(),i(),a(),u.Am.success("Success")}catch(e){u.Am.error("Something went wrong")}},[r,m,t,a,i,h]);return{hasLiked:m,toggleLike:f}},m=s(9873),f=e=>{var t,s;let{data:d={},userId:u}=e,x=(0,n.useRouter)(),p=(0,c.Z)(),{data:f}=(0,o.Z)(),{hasLiked:j,toggleLike:v}=h({postId:d.id,userId:u}),w=(0,l.useCallback)(e=>{e.stopPropagation(),x.push("/user/".concat(d.user.id))},[x,d.user.id]),b=(0,l.useCallback)(()=>{x.push("/posts/".concat(d.id))},[x,d.id]),Z=(0,l.useCallback)(async e=>{if(e.stopPropagation(),!f)return p.onOpen();v()},[p,f,v]),N=j?i.M_L:i.lo,g=(0,l.useMemo)(()=>(null==d?void 0:d.createdAt)?(0,a.Z)(new Date(d.createdAt)):null,[d.createdAt]);return(0,r.jsx)("div",{onClick:b,className:" border-b-[1px]  border-neutral-800  p-5  cursor-pointer  hover:bg-neutral-900  transition ",children:(0,r.jsxs)("div",{className:"flex flex-row items-start gap-3",children:[(0,r.jsx)(m.Z,{userIds:d.user.id}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,r.jsx)("p",{onClick:w,className:" text-white  font-semibold  cursor-pointer  hover:underline ",children:null==d?void 0:null===(t=d.user)||void 0===t?void 0:t.name}),(0,r.jsxs)("span",{onClick:w,className:" text-neutral-500 cursor-pointer hover:underline hidden md:block ",children:["@",d.user.username]}),(0,r.jsx)("span",{className:"text-neutral-500 text-sm",children:g})]}),(0,r.jsx)("div",{className:"text-white mt-1",children:null==d?void 0:d.body}),(0,r.jsxs)("div",{className:"flex flex-row items-center mt-3 gap-10",children:[(0,r.jsxs)("div",{className:" flex  flex-row  items-center  text-neutral-500  gap-2  cursor-pointer  transition  hover:text-sky-500 ",children:[(0,r.jsx)(i.e$J,{size:20}),(0,r.jsx)("p",{children:(null===(s=d.comments)||void 0===s?void 0:s.length)||0})]}),(0,r.jsxs)("div",{onClick:Z,className:" flex  flex-row  items-center  text-neutral-500  gap-2  cursor-pointer  transition  hover:text-red-500 ",children:[(0,r.jsx)(N,{color:j?"red":"",size:20}),(0,r.jsx)("p",{children:null==d?void 0:d.likeIds.length})]})]})]})]})})}},4217:function(e,t,s){"use strict";var r=s(9734),n=s(8698);t.Z=e=>{let{data:t,error:s,isLoading:l,mutate:i}=(0,r.ZP)(e?"/api/posts/".concat(e):null,n.Z);return{data:t,error:s,isLoading:l,mutate:i}}},2402:function(e,t,s){"use strict";var r=s(8698),n=s(9734);t.Z=e=>{let{data:t,error:s,isLoading:l,mutate:i}=(0,n.ZP)(e?"/api/posts?userId=".concat(e):"/api/posts",r.Z);return{data:t,error:s,isLoading:l,mutate:i}}},2603:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d},metadata:function(){return o}});var r=s(5893),n=s(9852),l=s(2382),i=s(7406),a=s(9008),c=s.n(a);let o={title:"Twitter ",description:"This is Twitter clone "};function d(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c(),{children:(0,r.jsx)("title",{children:"Twitter"})}),(0,r.jsx)(n.Z,{label:"Home"}),(0,r.jsx)(l.Z,{placeholder:"What's Happening?"}),(0,r.jsx)(i.Z,{})]})}}},function(e){e.O(0,[877,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);